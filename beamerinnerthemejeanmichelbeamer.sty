\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{beamerinnerthemejeanmichelbeamer}[2016/08/12 Le beamer qui est plus beau que ta maman]

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%       Packages
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{fontawesome}
\usepackage{tikz}
\usepackage{calc}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%       Titles
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\def\maketitle{\ifbeamer@inframe\titlepage\else\frame[plain]{\titlepage}\fi}
\def\titlepage{\usebeamertemplate{title page}}
\setbeamertemplate{title page}{
    \begin{minipage}{\textwidth}
        \centering
        \vfill
        \ifx \inserttitle\@empty     \else \usebeamertemplate{title}     \fi
        \ifx \insertsubtitle\@empty  \else \usebeamertemplate{subtitle}  \fi
        \usebeamertemplate{title separator}
        \vspace{1em}

        \ifx \insertauthor\@empty    \else \usebeamertemplate{author}    \fi
        \ifx \insertdate\@empty      \else \usebeamertemplate{date}      \fi
        \ifx \insertinstitute\@empty \else \usebeamertemplate{institute} \fi
        \vfill
    \end{minipage}
}

\setbeamertemplate{title}{
    {
        \usebeamercolor[fg]{title}
        \usebeamerfont{title}
        \inserttitle
        \par
        \vspace{0.75em}
    }
}

\setbeamertemplate{subtitle}{
    {
        \usebeamercolor[fg]{subtitle}
        \usebeamerfont{subtitle}
        \insertsubtitle
        \par
        \vspace{1em}
    }
}

\setbeamertemplate{author}{
    {
        \usebeamercolor[fg]{author}
        \usebeamerfont{author}
        \insertauthor
        \par
        \vspace{0.3em}
    }
}

\setbeamertemplate{date}{
    {
        \usebeamercolor[fg]{date}
        \usebeamerfont{date}
        \insertdate
        \par
        \vspace{0.3em}
    }
}

\setbeamertemplate{institute}{
    {
        \usebeamercolor[fg]{institute}
        \usebeamerfont{institute}
        \insertinstitute
        \par
        \vspace{0.3em}
    }
}

\setbeamertemplate{title separator}{
    \begin{tikzpicture}
        \draw[draw=blue] (0,0) rectangle (\textwidth, 0.5pt);
    \end{tikzpicture}
}

\setbeamertemplate{frametitle} {
    \nointerlineskip
    \begin{beamercolorbox}[sep=0.6em, wd=\paperwidth]{frametitle}
        \vspace*{-0.2em}
        \strut\insertframetitle\strut
    \end{beamercolorbox}
}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%       List items
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\setbeamertemplate{itemize item}{\footnotesize\faAngleRight}
\setbeamertemplate{itemize subitem}{\footnotesize\faAngleRight}
\setbeamertemplate{itemize subsubitem}{\footnotesize\faAngleRight}

\newlength{\progressbar@progress}
\newcommand{\progressbar}{
    \setlength{\progressbar@progress}{
        \paperwidth * \ratio{\insertframenumber pt}{\inserttotalframenumber pt}
    }
    \begin{tikzpicture}
        \draw[draw=fade!50] (0,0) rectangle (\textwidth, 0.5pt);
        \draw[draw=orange] (0,0) rectangle (\progressbar@progress, 0.5pt);
    \end{tikzpicture}
}

\setbeamertemplate{footline}{
    {\centering
        \color{fade}\insertframenumber/\inserttotalframenumber\\
        \vspace*{0.5em}
    }
    \progressbar
}

\setbeamertemplate{navigation symbols}{}

